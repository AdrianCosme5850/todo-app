{"ast":null,"code":"/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __extends, __rest } from \"tslib\";\n/**\n * @fileoverview This component is DEPRECATED, and the code is frozen.\n * All changes & bugfixes should be made to Select2 instead.\n */\n/* eslint-disable deprecation/deprecation, @blueprintjs/no-deprecated-components */\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { AbstractPureComponent2, Button, DISPLAYNAME_PREFIX, InputGroup, Keys, Popover, Position, refHandler, setRef } from \"@blueprintjs/core\";\nimport { Classes } from \"../../common\";\nimport { QueryList } from \"../query-list/queryList\";\n/** @deprecated use { Select2 } from \"@blueprintjs/select\" */\nvar Select = /** @class */function (_super) {\n  __extends(Select, _super);\n  function Select() {\n    var _this = this;\n    var _a;\n    _this = _super.apply(this, arguments) || this;\n    _this.state = {\n      isOpen: false\n    };\n    _this.inputElement = null;\n    _this.queryList = null;\n    _this.handleInputRef = refHandler(_this, \"inputElement\", (_a = _this.props.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef);\n    _this.handleQueryListRef = function (ref) {\n      return _this.queryList = ref;\n    };\n    _this.renderQueryList = function (listProps) {\n      var _a;\n      // not using defaultProps cuz they're hard to type with generics (can't use <T> on static members)\n      var _b = _this.props,\n        fill = _b.fill,\n        _c = _b.filterable,\n        filterable = _c === void 0 ? true : _c,\n        _d = _b.disabled,\n        disabled = _d === void 0 ? false : _d,\n        _e = _b.inputProps,\n        inputProps = _e === void 0 ? {} : _e,\n        _f = _b.popoverProps,\n        popoverProps = _f === void 0 ? {} : _f,\n        matchTargetWidth = _b.matchTargetWidth;\n      if (fill) {\n        popoverProps.fill = true;\n      }\n      if (matchTargetWidth) {\n        if (popoverProps.modifiers == null) {\n          popoverProps.modifiers = {};\n        }\n        popoverProps.modifiers.minWidth = {\n          enabled: true,\n          fn: function (data) {\n            data.styles.width = \"\".concat(data.offsets.reference.width, \"px\");\n            return data;\n          },\n          order: 800\n        };\n        popoverProps.usePortal = false;\n        popoverProps.wrapperTagName = \"div\";\n      }\n      var input = React.createElement(InputGroup, __assign({\n        leftIcon: \"search\",\n        placeholder: \"Filter...\",\n        rightElement: _this.maybeRenderClearButton(listProps.query)\n      }, inputProps, {\n        inputRef: _this.handleInputRef,\n        onChange: listProps.handleQueryChange,\n        value: listProps.query\n      }));\n      var handleKeyDown = listProps.handleKeyDown,\n        handleKeyUp = listProps.handleKeyUp;\n      return React.createElement(Popover, __assign({\n        autoFocus: false,\n        enforceFocus: false,\n        isOpen: _this.state.isOpen,\n        disabled: disabled,\n        position: Position.BOTTOM_LEFT\n      }, popoverProps, {\n        className: classNames(listProps.className, popoverProps.className),\n        onInteraction: _this.handlePopoverInteraction,\n        popoverClassName: classNames(Classes.SELECT_POPOVER, popoverProps.popoverClassName, (_a = {}, _a[Classes.SELECT_MATCH_TARGET_WIDTH] = matchTargetWidth, _a)),\n        onOpening: _this.handlePopoverOpening,\n        onOpened: _this.handlePopoverOpened,\n        onClosing: _this.handlePopoverClosing\n      }), React.createElement(\"div\", {\n        onKeyDown: _this.state.isOpen ? handleKeyDown : _this.handleTargetKeyDown,\n        onKeyUp: _this.state.isOpen ? handleKeyUp : undefined\n      }, _this.props.children), React.createElement(\"div\", {\n        onKeyDown: handleKeyDown,\n        onKeyUp: handleKeyUp\n      }, filterable ? input : undefined, listProps.itemList));\n    };\n    _this.handleTargetKeyDown = function (event) {\n      // open popover when arrow key pressed on target while closed\n      // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n      if (event.which === Keys.ARROW_UP || event.which === Keys.ARROW_DOWN) {\n        event.preventDefault();\n        _this.setState({\n          isOpen: true\n        });\n      }\n    };\n    _this.handleItemSelect = function (item, event) {\n      var _a, _b;\n      _this.setState({\n        isOpen: false\n      });\n      (_b = (_a = _this.props).onItemSelect) === null || _b === void 0 ? void 0 : _b.call(_a, item, event);\n    };\n    _this.handlePopoverInteraction = function (isOpen, event) {\n      var _a, _b;\n      _this.setState({\n        isOpen: isOpen\n      });\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onInteraction) === null || _b === void 0 ? void 0 : _b.call(_a, isOpen, event);\n    };\n    _this.handlePopoverOpening = function (node) {\n      var _a, _b;\n      // save currently focused element before popover steals focus, so we can restore it when closing.\n      _this.previousFocusedElement = document.activeElement;\n      if (_this.props.resetOnClose) {\n        _this.resetQuery();\n      }\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpening) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n    _this.handlePopoverOpened = function (node) {\n      var _a, _b;\n      // scroll active item into view after popover transition completes and all dimensions are stable.\n      if (_this.queryList != null) {\n        _this.queryList.scrollActiveItemIntoView();\n      }\n      _this.requestAnimationFrame(function () {\n        var _a;\n        var _b = _this.props.inputProps,\n          inputProps = _b === void 0 ? {} : _b;\n        // autofocus is enabled by default\n        if (inputProps.autoFocus !== false) {\n          (_a = _this.inputElement) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n      });\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onOpened) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n    _this.handlePopoverClosing = function (node) {\n      var _a, _b;\n      // restore focus to saved element.\n      // timeout allows popover to begin closing and remove focus handlers beforehand.\n      /* istanbul ignore next */\n      _this.requestAnimationFrame(function () {\n        if (_this.previousFocusedElement !== undefined) {\n          _this.previousFocusedElement.focus();\n          _this.previousFocusedElement = undefined;\n        }\n      });\n      (_b = (_a = _this.props.popoverProps) === null || _a === void 0 ? void 0 : _a.onClosing) === null || _b === void 0 ? void 0 : _b.call(_a, node);\n    };\n    _this.resetQuery = function () {\n      return _this.queryList && _this.queryList.setQuery(\"\", true);\n    };\n    return _this;\n  }\n  Select.ofType = function () {\n    return Select;\n  };\n  Select.prototype.render = function () {\n    // omit props specific to this component, spread the rest.\n    var _a = this.props,\n      filterable = _a.filterable,\n      inputProps = _a.inputProps,\n      popoverProps = _a.popoverProps,\n      restProps = __rest(_a, [\"filterable\", \"inputProps\", \"popoverProps\"]);\n    return React.createElement(QueryList, __assign({}, restProps, {\n      onItemSelect: this.handleItemSelect,\n      ref: this.handleQueryListRef,\n      renderer: this.renderQueryList\n    }));\n  };\n  Select.prototype.componentDidUpdate = function (prevProps, prevState) {\n    var _a, _b, _c, _d, _e;\n    if (((_a = prevProps.inputProps) === null || _a === void 0 ? void 0 : _a.inputRef) !== ((_b = this.props.inputProps) === null || _b === void 0 ? void 0 : _b.inputRef)) {\n      setRef((_c = prevProps.inputProps) === null || _c === void 0 ? void 0 : _c.inputRef, null);\n      this.handleInputRef = refHandler(this, \"inputElement\", (_d = this.props.inputProps) === null || _d === void 0 ? void 0 : _d.inputRef);\n      setRef((_e = this.props.inputProps) === null || _e === void 0 ? void 0 : _e.inputRef, this.inputElement);\n    }\n    if (this.state.isOpen && !prevState.isOpen && this.queryList != null) {\n      this.queryList.scrollActiveItemIntoView();\n    }\n  };\n  Select.prototype.maybeRenderClearButton = function (query) {\n    return query.length > 0 ? React.createElement(Button, {\n      icon: \"cross\",\n      minimal: true,\n      onClick: this.resetQuery\n    }) : undefined;\n  };\n  Select.displayName = \"\".concat(DISPLAYNAME_PREFIX, \".Select\");\n  return Select;\n}(AbstractPureComponent2);\nexport { Select };","map":{"version":3,"mappings":"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","names":["classNames","React","AbstractPureComponent2","Button","DISPLAYNAME_PREFIX","InputGroup","Keys","Popover","Position","refHandler","setRef","Classes","QueryList","__extends","_this","isOpen","props","inputProps","inputRef","ref","queryList","listProps","fill","_c","filterable","_d","disabled","_e","_f","popoverProps","matchTargetWidth","modifiers","minWidth","enabled","fn","data","styles","width","offsets","reference","order","usePortal","wrapperTagName","input","leftIcon","placeholder","rightElement","maybeRenderClearButton","query","handleInputRef","onChange","handleQueryChange","value","handleKeyUp","autoFocus","enforceFocus","state","position","BOTTOM_LEFT","className","onInteraction","handlePopoverInteraction","popoverClassName","SELECT_POPOVER","_a","SELECT_MATCH_TARGET_WIDTH","onOpening","handlePopoverOpening","onOpened","handlePopoverOpened","onClosing","handlePopoverClosing","onKeyDown","handleKeyDown","handleTargetKeyDown","onKeyUp","undefined","children","itemList","event","which","ARROW_UP","ARROW_DOWN","preventDefault","setState","item","onItemSelect","node","previousFocusedElement","document","activeElement","resetOnClose","resetQuery","scrollActiveItemIntoView","requestAnimationFrame","inputElement","focus","setQuery","Select","restProps","handleItemSelect","handleQueryListRef","renderer","renderQueryList","prevProps","prevState","length","icon","minimal","onClick"],"sourceRoot":"","sources":["../../../../src/components/select/select.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}