{"ast":null,"code":"/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __extends, __rest } from \"tslib\";\nimport * as React from \"react\";\nimport { AbstractComponent2, DISPLAYNAME_PREFIX, Keys, Menu, Utils } from \"@blueprintjs/core\";\nimport { executeItemsEqual, getActiveItem, getCreateNewItem, isCreateNewItem, renderFilteredItems } from \"../../common\";\nvar QueryList = /** @class */function (_super) {\n  __extends(QueryList, _super);\n  function QueryList(props, context) {\n    var _this = this;\n    var _a, _b;\n    _this = _super.call(this, props, context) || this;\n    _this.refHandlers = {\n      itemsParent: function (ref) {\n        return _this.itemsParentRef = ref;\n      }\n    };\n    /**\n     * Flag indicating that we should check whether selected item is in viewport\n     * after rendering, typically because of keyboard change. Set to `true` when\n     * manipulating state in a way that may cause active item to scroll away.\n     */\n    _this.shouldCheckActiveItemInViewport = false;\n    /**\n     * The item that we expect to be the next selected active item (based on click\n     * or key interactions). When scrollToActiveItem = false, used to detect if\n     * an unexpected external change to the active item has been made.\n     */\n    _this.expectedNextActiveItem = null;\n    /**\n     * Flag which is set to true while in between an ENTER \"keydown\" event and its\n     * corresponding \"keyup\" event.\n     *\n     * When entering text via an IME (https://en.wikipedia.org/wiki/Input_method),\n     * the ENTER key is pressed to confirm the character(s) to be input from a list\n     * of options. The operating system intercepts the ENTER \"keydown\" event and\n     * prevents it from propagating to the application, but \"keyup\" is still\n     * fired, triggering a spurious event which this component does not expect.\n     *\n     * To work around this quirk, we keep track of \"real\" key presses by setting\n     * this flag in handleKeyDown.\n     */\n    _this.isEnterKeyPressed = false;\n    /** default `itemListRenderer` implementation */\n    _this.renderItemList = function (listProps) {\n      var _a = _this.props,\n        initialContent = _a.initialContent,\n        noResults = _a.noResults;\n      // omit noResults if createNewItemFromQuery and createNewItemRenderer are both supplied, and query is not empty\n      var createItemView = listProps.renderCreateItem();\n      var maybeNoResults = createItemView != null ? null : noResults;\n      var menuContent = renderFilteredItems(listProps, maybeNoResults, initialContent);\n      if (menuContent == null && createItemView == null) {\n        return null;\n      }\n      var createFirst = _this.isCreateItemFirst();\n      return React.createElement(Menu, __assign({\n        role: \"listbox\"\n      }, listProps.menuProps, {\n        ulRef: listProps.itemsParentRef\n      }), createFirst && createItemView, menuContent, !createFirst && createItemView);\n    };\n    /** wrapper around `itemRenderer` to inject props */\n    _this.renderItem = function (item, index) {\n      if (_this.props.disabled !== true) {\n        var _a = _this.state,\n          activeItem = _a.activeItem,\n          query = _a.query,\n          filteredItems = _a.filteredItems;\n        var modifiers = {\n          active: executeItemsEqual(_this.props.itemsEqual, getActiveItem(activeItem), item),\n          disabled: isItemDisabled(item, index, _this.props.itemDisabled),\n          matchesPredicate: filteredItems.indexOf(item) >= 0\n        };\n        return _this.props.itemRenderer(item, {\n          handleClick: function (e) {\n            return _this.handleItemSelect(item, e);\n          },\n          handleFocus: function () {\n            return _this.setActiveItem(item);\n          },\n          index: index,\n          modifiers: modifiers,\n          query: query\n        });\n      }\n      return null;\n    };\n    _this.renderCreateItemMenuItem = function () {\n      if (_this.isCreateItemRendered()) {\n        var _a = _this.state,\n          activeItem = _a.activeItem,\n          query = _a.query;\n        var trimmedQuery_1 = query.trim();\n        var handleClick = function (evt) {\n          _this.handleItemCreate(trimmedQuery_1, evt);\n        };\n        var isActive = isCreateNewItem(activeItem);\n        return _this.props.createNewItemRenderer(trimmedQuery_1, isActive, handleClick);\n      }\n      return null;\n    };\n    _this.handleItemCreate = function (query, evt) {\n      var _a, _b, _c, _d;\n      // we keep a cached createNewItem in state, but might as well recompute\n      // the result just to be sure it's perfectly in sync with the query.\n      var value = (_b = (_a = _this.props).createNewItemFromQuery) === null || _b === void 0 ? void 0 : _b.call(_a, query);\n      if (value != null) {\n        var newItems = Array.isArray(value) ? value : [value];\n        for (var _i = 0, newItems_1 = newItems; _i < newItems_1.length; _i++) {\n          var item = newItems_1[_i];\n          (_d = (_c = _this.props).onItemSelect) === null || _d === void 0 ? void 0 : _d.call(_c, item, evt);\n        }\n        _this.maybeResetQuery();\n      }\n    };\n    _this.handleItemSelect = function (item, event) {\n      var _a, _b;\n      _this.setActiveItem(item);\n      (_b = (_a = _this.props).onItemSelect) === null || _b === void 0 ? void 0 : _b.call(_a, item, event);\n      _this.maybeResetQuery();\n    };\n    _this.handlePaste = function (queries) {\n      var _a = _this.props,\n        createNewItemFromQuery = _a.createNewItemFromQuery,\n        onItemsPaste = _a.onItemsPaste;\n      var nextActiveItem;\n      var nextQueries = [];\n      // Find an exising itemÂ that exactly matches each pasted value, or\n      // create a new item if possible. Ignore unmatched values if creating\n      // items is disabled.\n      var pastedItemsToEmit = [];\n      for (var _i = 0, queries_1 = queries; _i < queries_1.length; _i++) {\n        var query = queries_1[_i];\n        var equalItem = getMatchingItem(query, _this.props);\n        if (equalItem !== undefined) {\n          nextActiveItem = equalItem;\n          pastedItemsToEmit.push(equalItem);\n        } else if (_this.canCreateItems()) {\n          var value = createNewItemFromQuery === null || createNewItemFromQuery === void 0 ? void 0 : createNewItemFromQuery(query);\n          if (value !== undefined) {\n            var newItems = Array.isArray(value) ? value : [value];\n            pastedItemsToEmit.push.apply(pastedItemsToEmit, newItems);\n          }\n        } else {\n          nextQueries.push(query);\n        }\n      }\n      // UX nicety: combine all unmatched queries into a single\n      // comma-separated query in the input, so we don't lose any information.\n      // And don't reset the active item; we'll do that ourselves below.\n      _this.setQuery(nextQueries.join(\", \"), false);\n      // UX nicety: update the active item if we matched with at least one\n      // existing item.\n      if (nextActiveItem !== undefined) {\n        _this.setActiveItem(nextActiveItem);\n      }\n      onItemsPaste === null || onItemsPaste === void 0 ? void 0 : onItemsPaste(pastedItemsToEmit);\n    };\n    _this.handleKeyDown = function (event) {\n      var _a, _b;\n      // eslint-disable-next-line deprecation/deprecation\n      var keyCode = event.keyCode;\n      if (keyCode === Keys.ARROW_UP || keyCode === Keys.ARROW_DOWN) {\n        event.preventDefault();\n        var nextActiveItem = _this.getNextActiveItem(keyCode === Keys.ARROW_UP ? -1 : 1);\n        if (nextActiveItem != null) {\n          _this.setActiveItem(nextActiveItem);\n        }\n      } else if (keyCode === Keys.ENTER) {\n        _this.isEnterKeyPressed = true;\n      }\n      (_b = (_a = _this.props).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    };\n    _this.handleKeyUp = function (event) {\n      var onKeyUp = _this.props.onKeyUp;\n      var activeItem = _this.state.activeItem;\n      // eslint-disable-next-line deprecation/deprecation\n      if (event.keyCode === Keys.ENTER && _this.isEnterKeyPressed) {\n        // We handle ENTER in keyup here to play nice with the Button component's keyboard\n        // clicking. Button is commonly used as the only child of Select. If we were to\n        // instead process ENTER on keydown, then Button would click itself on keyup and\n        // the Select popover would re-open.\n        event.preventDefault();\n        if (activeItem == null || isCreateNewItem(activeItem)) {\n          _this.handleItemCreate(_this.state.query, event);\n        } else {\n          _this.handleItemSelect(activeItem, event);\n        }\n        _this.isEnterKeyPressed = false;\n      }\n      onKeyUp === null || onKeyUp === void 0 ? void 0 : onKeyUp(event);\n    };\n    _this.handleInputQueryChange = function (event) {\n      var _a, _b;\n      var query = event == null ? \"\" : event.target.value;\n      _this.setQuery(query);\n      (_b = (_a = _this.props).onQueryChange) === null || _b === void 0 ? void 0 : _b.call(_a, query, event);\n    };\n    var _c = props.query,\n      query = _c === void 0 ? \"\" : _c;\n    var createNewItem = (_a = props.createNewItemFromQuery) === null || _a === void 0 ? void 0 : _a.call(props, query);\n    var filteredItems = getFilteredItems(query, props);\n    _this.state = {\n      activeItem: props.activeItem !== undefined ? props.activeItem : (_b = props.initialActiveItem) !== null && _b !== void 0 ? _b : getFirstEnabledItem(filteredItems, props.itemDisabled),\n      createNewItem: createNewItem,\n      filteredItems: filteredItems,\n      query: query\n    };\n    return _this;\n  }\n  /** @deprecated no longer necessary now that the TypeScript parser supports type arguments on JSX element tags */\n  QueryList.ofType = function () {\n    return QueryList;\n  };\n  QueryList.prototype.render = function () {\n    var _a = this.props,\n      className = _a.className,\n      items = _a.items,\n      renderer = _a.renderer,\n      _b = _a.itemListRenderer,\n      itemListRenderer = _b === void 0 ? this.renderItemList : _b,\n      menuProps = _a.menuProps;\n    var _c = this.state,\n      createNewItem = _c.createNewItem,\n      spreadableState = __rest(_c, [\"createNewItem\"]);\n    return renderer(__assign(__assign({}, spreadableState), {\n      className: className,\n      handleItemSelect: this.handleItemSelect,\n      handleKeyDown: this.handleKeyDown,\n      handleKeyUp: this.handleKeyUp,\n      handlePaste: this.handlePaste,\n      handleQueryChange: this.handleInputQueryChange,\n      itemList: itemListRenderer(__assign(__assign({}, spreadableState), {\n        items: items,\n        itemsParentRef: this.refHandlers.itemsParent,\n        menuProps: menuProps,\n        renderCreateItem: this.renderCreateItemMenuItem,\n        renderItem: this.renderItem\n      }))\n    }));\n  };\n  QueryList.prototype.componentDidUpdate = function (prevProps) {\n    var _this = this;\n    if (this.props.activeItem !== undefined && this.props.activeItem !== this.state.activeItem) {\n      this.shouldCheckActiveItemInViewport = true;\n      this.setState({\n        activeItem: this.props.activeItem\n      });\n    }\n    if (this.props.query != null && this.props.query !== prevProps.query) {\n      // new query\n      this.setQuery(this.props.query, this.props.resetOnQuery, this.props);\n    } else if (\n    // same query (or uncontrolled query), but items in the list changed\n    !Utils.shallowCompareKeys(this.props, prevProps, {\n      include: [\"items\", \"itemListPredicate\", \"itemPredicate\"]\n    })) {\n      this.setQuery(this.state.query);\n    }\n    if (this.shouldCheckActiveItemInViewport) {\n      // update scroll position immediately before repaint so DOM is accurate\n      // (latest filteredItems) and to avoid flicker.\n      this.requestAnimationFrame(function () {\n        return _this.scrollActiveItemIntoView();\n      });\n      // reset the flag\n      this.shouldCheckActiveItemInViewport = false;\n    }\n  };\n  QueryList.prototype.scrollActiveItemIntoView = function () {\n    var scrollToActiveItem = this.props.scrollToActiveItem !== false;\n    var externalChangeToActiveItem = !executeItemsEqual(this.props.itemsEqual, getActiveItem(this.expectedNextActiveItem), getActiveItem(this.props.activeItem));\n    this.expectedNextActiveItem = null;\n    if (!scrollToActiveItem && externalChangeToActiveItem) {\n      return;\n    }\n    var activeElement = this.getActiveElement();\n    if (this.itemsParentRef != null && activeElement != null) {\n      var activeTop = activeElement.offsetTop,\n        activeHeight = activeElement.offsetHeight;\n      var _a = this.itemsParentRef,\n        parentOffsetTop = _a.offsetTop,\n        parentScrollTop = _a.scrollTop,\n        parentHeight = _a.clientHeight;\n      // compute padding on parent element to ensure we always leave space\n      var _b = this.getItemsParentPadding(),\n        paddingTop = _b.paddingTop,\n        paddingBottom = _b.paddingBottom;\n      // compute the two edges of the active item for comparison, including parent padding\n      var activeBottomEdge = activeTop + activeHeight + paddingBottom - parentOffsetTop;\n      var activeTopEdge = activeTop - paddingTop - parentOffsetTop;\n      if (activeBottomEdge >= parentScrollTop + parentHeight) {\n        // offscreen bottom: align bottom of item with bottom of viewport\n        this.itemsParentRef.scrollTop = activeBottomEdge + activeHeight - parentHeight;\n      } else if (activeTopEdge <= parentScrollTop) {\n        // offscreen top: align top of item with top of viewport\n        this.itemsParentRef.scrollTop = activeTopEdge - activeHeight;\n      }\n    }\n  };\n  QueryList.prototype.setQuery = function (query, resetActiveItem, props) {\n    var _a;\n    if (resetActiveItem === void 0) {\n      resetActiveItem = this.props.resetOnQuery;\n    }\n    if (props === void 0) {\n      props = this.props;\n    }\n    var createNewItemFromQuery = props.createNewItemFromQuery;\n    this.shouldCheckActiveItemInViewport = true;\n    var hasQueryChanged = query !== this.state.query;\n    if (hasQueryChanged) {\n      (_a = props.onQueryChange) === null || _a === void 0 ? void 0 : _a.call(props, query);\n    }\n    // Leading and trailing whitespace can be confusing to display, so we remove it when passing it\n    // to functions dealing with data, like createNewItemFromQuery. But we need the unaltered user-typed\n    // query to remain in state to be able to render controlled text inputs properly.\n    var trimmedQuery = query.trim();\n    var filteredItems = getFilteredItems(trimmedQuery, props);\n    var createNewItem = createNewItemFromQuery != null && trimmedQuery !== \"\" ? createNewItemFromQuery(trimmedQuery) : undefined;\n    this.setState({\n      createNewItem: createNewItem,\n      filteredItems: filteredItems,\n      query: query\n    });\n    // always reset active item if it's now filtered or disabled\n    var activeIndex = this.getActiveIndex(filteredItems);\n    var shouldUpdateActiveItem = resetActiveItem || activeIndex < 0 || isItemDisabled(getActiveItem(this.state.activeItem), activeIndex, props.itemDisabled);\n    if (shouldUpdateActiveItem) {\n      // if the `createNewItem` is first, that should be the first active item.\n      if (this.isCreateItemRendered() && this.isCreateItemFirst()) {\n        this.setActiveItem(getCreateNewItem());\n      } else {\n        this.setActiveItem(getFirstEnabledItem(filteredItems, props.itemDisabled));\n      }\n    }\n  };\n  QueryList.prototype.setActiveItem = function (activeItem) {\n    var _a, _b, _c, _d;\n    this.expectedNextActiveItem = activeItem;\n    if (this.props.activeItem === undefined) {\n      // indicate that the active item may need to be scrolled into view after update.\n      this.shouldCheckActiveItemInViewport = true;\n      this.setState({\n        activeItem: activeItem\n      });\n    }\n    if (isCreateNewItem(activeItem)) {\n      (_b = (_a = this.props).onActiveItemChange) === null || _b === void 0 ? void 0 : _b.call(_a, null, true);\n    } else {\n      (_d = (_c = this.props).onActiveItemChange) === null || _d === void 0 ? void 0 : _d.call(_c, activeItem, false);\n    }\n  };\n  QueryList.prototype.getActiveElement = function () {\n    var activeItem = this.state.activeItem;\n    if (this.itemsParentRef != null) {\n      if (isCreateNewItem(activeItem)) {\n        var index = this.isCreateItemFirst() ? 0 : this.state.filteredItems.length;\n        return this.itemsParentRef.children.item(index);\n      } else {\n        var activeIndex = this.getActiveIndex();\n        return this.itemsParentRef.children.item(activeIndex);\n      }\n    }\n    return undefined;\n  };\n  QueryList.prototype.getActiveIndex = function (items) {\n    if (items === void 0) {\n      items = this.state.filteredItems;\n    }\n    var activeItem = this.state.activeItem;\n    if (activeItem == null || isCreateNewItem(activeItem)) {\n      return -1;\n    }\n    // NOTE: this operation is O(n) so it should be avoided in render(). safe for events though.\n    for (var i = 0; i < items.length; ++i) {\n      if (executeItemsEqual(this.props.itemsEqual, items[i], activeItem)) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  QueryList.prototype.getItemsParentPadding = function () {\n    // assert ref exists because it was checked before calling\n    var _a = getComputedStyle(this.itemsParentRef),\n      paddingTop = _a.paddingTop,\n      paddingBottom = _a.paddingBottom;\n    return {\n      paddingBottom: pxToNumber(paddingBottom),\n      paddingTop: pxToNumber(paddingTop)\n    };\n  };\n  /**\n   * Get the next enabled item, moving in the given direction from the start\n   * index. A `null` return value means no suitable item was found.\n   *\n   * @param direction amount to move in each iteration, typically +/-1\n   * @param startIndex item to start iteration\n   */\n  QueryList.prototype.getNextActiveItem = function (direction, startIndex) {\n    if (startIndex === void 0) {\n      startIndex = this.getActiveIndex();\n    }\n    if (this.isCreateItemRendered()) {\n      var reachedCreate = startIndex === 0 && direction === -1 || startIndex === this.state.filteredItems.length - 1 && direction === 1;\n      if (reachedCreate) {\n        return getCreateNewItem();\n      }\n    }\n    return getFirstEnabledItem(this.state.filteredItems, this.props.itemDisabled, direction, startIndex);\n  };\n  QueryList.prototype.isCreateItemRendered = function () {\n    return this.canCreateItems() && this.state.query !== \"\" &&\n    // this check is unfortunately O(N) on the number of items, but\n    // alas, hiding the \"Create Item\" option when it exactly matches an\n    // existing item is much clearer.\n    !this.wouldCreatedItemMatchSomeExistingItem();\n  };\n  QueryList.prototype.isCreateItemFirst = function () {\n    return this.props.createNewItemPosition === \"first\";\n  };\n  QueryList.prototype.canCreateItems = function () {\n    return this.props.createNewItemFromQuery != null && this.props.createNewItemRenderer != null;\n  };\n  QueryList.prototype.wouldCreatedItemMatchSomeExistingItem = function () {\n    var _this = this;\n    // search only the filtered items, not the full items list, because we\n    // only need to check items that match the current query.\n    return this.state.filteredItems.some(function (item) {\n      var newItems = Array.isArray(_this.state.createNewItem) ? _this.state.createNewItem : [_this.state.createNewItem];\n      return newItems.some(function (newItem) {\n        return executeItemsEqual(_this.props.itemsEqual, item, newItem);\n      });\n    });\n  };\n  QueryList.prototype.maybeResetQuery = function () {\n    if (this.props.resetOnSelect) {\n      this.setQuery(\"\", true);\n    }\n  };\n  QueryList.displayName = \"\".concat(DISPLAYNAME_PREFIX, \".QueryList\");\n  QueryList.defaultProps = {\n    disabled: false,\n    resetOnQuery: true\n  };\n  return QueryList;\n}(AbstractComponent2);\nexport { QueryList };\nfunction pxToNumber(value) {\n  return value == null ? 0 : parseInt(value.slice(0, -2), 10);\n}\nfunction getMatchingItem(query, _a) {\n  var items = _a.items,\n    itemPredicate = _a.itemPredicate;\n  if (Utils.isFunction(itemPredicate)) {\n    // .find() doesn't exist in ES5. Alternative: use a for loop instead of\n    // .filter() so that we can return as soon as we find the first match.\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      if (itemPredicate(query, item, i, true)) {\n        return item;\n      }\n    }\n  }\n  return undefined;\n}\nfunction getFilteredItems(query, _a) {\n  var items = _a.items,\n    itemPredicate = _a.itemPredicate,\n    itemListPredicate = _a.itemListPredicate;\n  if (Utils.isFunction(itemListPredicate)) {\n    // note that implementations can reorder the items here\n    return itemListPredicate(query, items);\n  } else if (Utils.isFunction(itemPredicate)) {\n    return items.filter(function (item, index) {\n      return itemPredicate(query, item, index);\n    });\n  }\n  return items;\n}\n/** Wrap number around min/max values: if it exceeds one bound, return the other. */\nfunction wrapNumber(value, min, max) {\n  if (value < min) {\n    return max;\n  } else if (value > max) {\n    return min;\n  }\n  return value;\n}\nfunction isItemDisabled(item, index, itemDisabled) {\n  if (itemDisabled == null || item == null) {\n    return false;\n  } else if (Utils.isFunction(itemDisabled)) {\n    return itemDisabled(item, index);\n  }\n  return !!item[itemDisabled];\n}\n/**\n * Get the next enabled item, moving in the given direction from the start\n * index. A `null` return value means no suitable item was found.\n *\n * @param items the list of items\n * @param itemDisabled callback to determine if a given item is disabled\n * @param direction amount to move in each iteration, typically +/-1\n * @param startIndex which index to begin moving from\n */\nexport function getFirstEnabledItem(items, itemDisabled, direction, startIndex) {\n  if (direction === void 0) {\n    direction = 1;\n  }\n  if (startIndex === void 0) {\n    startIndex = items.length - 1;\n  }\n  if (items.length === 0) {\n    return null;\n  }\n  // remember where we started to prevent an infinite loop\n  var index = startIndex;\n  var maxIndex = items.length - 1;\n  do {\n    // find first non-disabled item\n    index = wrapNumber(index + direction, 0, maxIndex);\n    if (!isItemDisabled(items[index], index, itemDisabled)) {\n      return items[index];\n    }\n  } while (index !== startIndex && startIndex !== -1);\n  return null;\n}","map":{"version":3,"mappings":"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","names":["React","AbstractComponent2","DISPLAYNAME_PREFIX","Keys","Menu","Utils","executeItemsEqual","getActiveItem","getCreateNewItem","isCreateNewItem","renderFilteredItems","__extends","props","context","_super","_this","itemsParent","ref","itemsParentRef","listProps","initialContent","noResults","createItemView","renderCreateItem","maybeNoResults","menuContent","createFirst","isCreateItemFirst","role","menuProps","ulRef","item","index","disabled","state","activeItem","query","filteredItems","modifiers","active","itemsEqual","isItemDisabled","itemDisabled","matchesPredicate","indexOf","itemRenderer","handleClick","handleItemSelect","e","handleFocus","setActiveItem","isCreateItemRendered","trimmedQuery_1","trim","handleItemCreate","evt","isActive","createNewItemRenderer","value","createNewItemFromQuery","newItems","Array","isArray","newItems_1","_i","onItemSelect","maybeResetQuery","event","queries","onItemsPaste","nextActiveItem","nextQueries","pastedItemsToEmit","queries_1","equalItem","getMatchingItem","undefined","push","canCreateItems","setQuery","join","keyCode","ARROW_UP","ARROW_DOWN","preventDefault","getNextActiveItem","ENTER","isEnterKeyPressed","onKeyDown","onKeyUp","target","onQueryChange","createNewItem","getFilteredItems","initialActiveItem","getFirstEnabledItem","QueryList","className","items","renderer","_b","itemListRenderer","renderItemList","_c","spreadableState","handleKeyDown","handleKeyUp","handlePaste","handleQueryChange","handleInputQueryChange","itemList","refHandlers","renderCreateItemMenuItem","renderItem","prevProps","shouldCheckActiveItemInViewport","setState","resetOnQuery","shallowCompareKeys","include","requestAnimationFrame","scrollActiveItemIntoView","scrollToActiveItem","externalChangeToActiveItem","expectedNextActiveItem","activeElement","getActiveElement","activeTop","activeHeight","parentOffsetTop","parentScrollTop","parentHeight","getItemsParentPadding","paddingTop","paddingBottom","activeBottomEdge","activeTopEdge","scrollTop","resetActiveItem","hasQueryChanged","trimmedQuery","activeIndex","getActiveIndex","shouldUpdateActiveItem","onActiveItemChange","length","children","i","getComputedStyle","pxToNumber","direction","startIndex","reachedCreate","wouldCreatedItemMatchSomeExistingItem","createNewItemPosition","some","newItem","resetOnSelect","parseInt","slice","_a","itemPredicate","isFunction","itemListPredicate","filter","wrapNumber","min","max","maxIndex"],"sourceRoot":"","sources":["../../../../src/components/query-list/queryList.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}